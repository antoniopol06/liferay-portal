{"version":3,"sources":["/source/MapBase.es.js"],"names":[],"mappings":"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","sourcesContent":["'use strict';\n\nclass MapBase {\n\tconstructor(){\n\t\tthis.controls = [\n\t\t\t'Base.CONTROLS.PAN',\n\t\t\t'Base.CONTROLS.TYPE',\n\t\t\t'Base.CONTROLS.ZOOM'\n\t\t];\n\n\t\tthis.data = {};\n\n\t\tthis.geolocation = false;\n\n\t\tthis.position = {\n\t\t\tlocation: {\n\t\t\t\tlat: 0,\n\t\t\t\tlng: 0\n\t\t\t}\n\t\t};\n\n\t\tthis.zoom = 11;\n\n\t\tthis.initializer();\n\t}\n\n\tstatic CONTROLS() {\n\t\treturn {\n\t\t\tATTRIBUTION: 'attribution',\n\t\t\tGEOLOCATION: 'geolocation',\n\t\t\tHOME: 'home',\n\t\t\tOVERVIEW: 'overview',\n\t\t\tPAN: 'pan',\n\t\t\tROTATE: 'rotate',\n\t\t\tSCALE: 'scale',\n\t\t\tSEARCH: 'search',\n\t\t\tSTREETVIEW: 'streetview',\n\t\t\tTYPE: 'type',\n\t\t\tZOOM: 'zoom'\n\t\t};\n\t}\n\n\tstatic POSITION() {\n\t\treturn {\n\t\t\tBOTTOM: 11,\n\t\t\tBOTTOM_CENTER: 11,\n\t\t\tBOTTOM_LEFT: 10,\n\t\t\tBOTTOM_RIGHT: 12,\n\t\t\tCENTER: 13,\n\t\t\tLEFT: 5,\n\t\t\tLEFT_BOTTOM: 6,\n\t\t\tLEFT_CENTER: 4,\n\t\t\tLEFT_TOP: 5,\n\t\t\tRIGHT: 7,\n\t\t\tRIGHT_BOTTOM: 9,\n\t\t\tRIGHT_CENTER: 8,\n\t\t\tRIGHT_TOP: 7,\n\t\t\tTOP: 2,\n\t\t\tTOP_CENTER: 2,\n\t\t\tTOP_LEFT: 1,\n\t\t\tTOP_RIGHT: 3\n\t\t};\n\t}\n\n\tinitializer() {\n\t\tvar location = this.position || position.location ? position.location : {};\n\n\t\tif (!location.lat || !location.lng) {\n\t\t\tLiferay.Util.getGeolocation(\n\t\t\t\tfunction(latitude, longitude) {\n\t\t\t\t\tvar location = {\n\t\t\t\t\t\tlat: latitude,\n\t\t\t\t\t\tlng: longitude\n\t\t\t\t\t};\n\n\t\t\t\t\tthis._initializeLocation(location);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tthis._initializeLocation(location);\n\t\t}\n\t}\n\n\taddMarker(location) {\n\t\tvar MarkerImpl = this.MarkerImpl;\n\n\t\tif (MarkerImpl) {\n\t\t\treturn new MarkerImpl(\n\t\t\t\t{\n\t\t\t\t\tlocation: location,\n\t\t\t\t\tmap: this._map\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tgetNativeMap() {\n\t\treturn this._map;\n\t}\n\n\topenDialog(dialogConfig) {\n\t\tthis._getDialog().open(dialogConfig);\n\t}\n\n\t_bindUIMB() {\n\t\tvar geojsonLayer = this._geojsonLayer;\n\n\t\tif (geojsonLayer) {\n\t\t\tgeojsonLayer.on(\n\t\t\t\t'featuresAdded',\n\t\t\t\tfunction(event) {\n\t\t\t\t\tvar bounds = this.getBounds();\n\n\t\t\t\t\tvar features = event.features;\n\n\t\t\t\t\tif (features.length > 1) {\n\t\t\t\t\t\tevent.features.forEach(\n\t\t\t\t\t\t\tfunction(item, index) {\n\t\t\t\t\t\t\t\tbounds.extend(item.getGeometry().get());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.position = {\n\t\t\t\t\t\t\tlocation: features[0].getGeometry().get()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tgeojsonLayer.on(\n\t\t\t\t'featureClick',\n\t\t\t\tfunction(event) {\n\t\t\t\t\tthis.fire(\n\t\t\t\t\t\t'featureClick',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfeature: event.feature\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tvar gelocationMarker = this._geolocationMarker;\n\n\t\tif (geolocationMarker) {\n\t\t\tgeolocationMarker.on(\n\t\t\t\t'dragend',\n\t\t\t\tfunction (event) {\n\t\t\t\t\tvar geocoder = this._getGeocoder();\n\n\t\t\t\t\tgeocoder.reverse(\n\t\t\t\t\t\tevent.location,\n\t\t\t\t\t\tfunction(event) {\n\t\t\t\t\t\t\tthis.position = event.data;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tvar customControls = this._customControls;\n\n\t\tvar homeControl = customControls[this.CONTROLS().HOME];\n\n\t\tif (homeControl) {\n\t\t\thomeControl.on('click', this._onHomeButtonClick, this);\n\t\t}\n\n\t\tvar searchControls = customControls[this.CONTROLS().SEARCH];\n\n\t\tif (searchControl) {\n\t\t\tsearchControl.on(\n\t\t\t\t'search',\n\t\t\t\tfunction (event) {\n\t\t\t\t\tthis.position = event.position;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\t_createCustomControls() {\n\t\t/*TODO*/\n\t}\n\n\t_getControlsConfig() {\n\t\t/*TODO*/\n\t}\n\n\t_getDialog() {\n\t\tvar dialog = this._dialog;\n\n\t\tif (!dialog) {\n\t\t\tvar DialogImpl = this.DialogImpl;\n\n\t\t\tif (DialogImpl) {\n\t\t\t\tdialog = new DialogImpl(\n\t\t\t\t\t{\n\t\t\t\t\t\tmap: this._map\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn dialog;\n\t}\n\n\t_getGeocoder() {\n\t\tvar geocoder = this._geocoder;\n\n\t\tif (!geocoder) {\n\t\t\tvar GeoCoderImpl = this.GeocoderImpl;\n\n\t\t\tif (GeoCoderImpl) {\n\t\t\t\tgeocoder = new GeoCoderImpl();\n\n\t\t\t\tthis._geocoder = geocoder;\n\t\t\t}\n\t\t}\n\n\t\treturn geocoder;\n\t}\n\n\t_initializeGeojsonData() {\n\t\tvar data = this.data;\n\n\t\tif (data && this._geojsonLayer) {\n\t\t\tthis._geojsonLayer.addData(data);\n\t\t}\n\t}\n\n\t_initializeLocation(location) {\n\t\tif (this.geolocation && this.GeocoderImpl) {\n\t\t\tvar geocoder = this._getGeocoder();\n\n\t\t\tgeocoder.reverse(\n\t\t\t\tlocation,\n\t\t\t\tfunction (event) {\n\t\t\t\t\tthis._initializeMap(event.data);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tthis._initializeMap(\n\t\t\t\t{\n\t\t\t\t\tlocation: location\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\t_initializeMap(position) {\n\t\tvar location = position.location;\n\n\t\tthis._originalPosition = position;\n\n\t\tvar controlsConfig = this._getControlsConfig();\n\n\t\tthis._map = this._createMap(location, controlsConfig);\n\n\t\tif (this.geolocation) {\n\t\t\tthis._geolocationMarker = this.addMarker(location);\n\t\t}\n\n\t\tvar GeojsonImpl = this.GeojsonImpl;\n\n\t\tif (GeojsonImpl) {\n\t\t\tinstance._geojsonLayer = new GeojsonImpl(\n\t\t\t\t{\n\t\t\t\t\tmap: this._map\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tthis.position = position;\n\n\t\tthis._createCustomControls();\n\t\tthis._bindUIMB();\n\t\tthis._initializeGeojsonData();\n\t}\n\n\t_onHomeButtonClick(event) {\n\t\tevent.preventDefault();\n\n\t\tthis.position = this._originalPosition;\n\t}\n\n\t_onPositionChange(event) {\n\t\tvar location = event.newVal.location;\n\n\t\tthis.setCenter(location);\n\n\t\tvar gelocationMarker = this._gelocationMarker;\n\n\t\tif (geolocationMarker) {\n\t\t\tgeolocationMarker.setPosition(location);\n\t\t}\n\t}\n\n\n}\nexport default MapBase;"]}